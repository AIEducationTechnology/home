# 即梦AI文生视频S2.0Pro API 接口文档（火山引擎）

## 1. 概述

本接口文档描述了如何调用火山引擎即梦AI文生视频S2.0Pro API 来生成视频。该API可以根据文本指令生成高质量、视觉流畅的视频内容。

### 1.1 接口特性
- 支持文生视频和图生视频
- 深度理解文字与图像指令
- 生成的视频视觉流畅度极佳
- 支持对多维参数进行精细调控

### 1.2 核心能力
- **高语义遵循**：具有极高的“提示词遵循能力”，支持输入复杂的提示词（例如镜头切换、人物连续动作、情绪演绎、运镜控制）
- **动效流畅**：动作效果流畅自然，整体视频效果结构稳定
- **画面一致性**：支持保持风格及主体一致性

## 2. 基础信息

- **协议**：HTTPS
- **方法**：POST
- **域名**：visual.volcengineapi.com
- **版本**：2022-08-31
- **接口地址**：
  - 提交任务：`/api/video/submit`
  - 查询任务：`/api/video/query`

## 3. 请求格式

### 3.1 请求头

```http
Content-Type: application/json
Region: cn-north-1
Service: cv
```

### 3.2 Query参数

| 参数名 | 类型 | 必填 | 描述 |
|-------|------|------|------|
| Action | string | 是 | 接口名，取值：CVSync2AsyncSubmitTask（提交任务）或 CVSync2AsyncGetResult（查询结果） |
| Version | string | 是 | 版本号，取值：2022-08-31 |

### 3.3 Body参数

| 名称 | 类型 | 必选 | 描述 |
|-------|------|------|------|
| req_key | string | 是 | 服务标识，取固定值: jimeng_vgfm_t2v_l20 |
| prompt | string | 是 | 生成视频的提示词，支持中英文，150字符以内 |
| seed | integer | 否 | 随机种子，默认-1（随机） |
| aspect_ratio | string | 否 | 生成视频的尺寸，可选值：'16:9'（1280x720默认），'9:16'（720x1280），'1:1'（960x960），'4:3'（960x720），'3:4'（720x960），'21:9'（1680x720） |

## 4. 提交任务接口

### 4.1 功能
根据提供的提示词和参数提交视频生成任务

### 4.2 示例请求体

```json
{
  "req_key": "jimeng_vgfm_t2v_l20",
  "prompt": "蓝色毛绒玩具在超市里拖地，结果拖把洒出好多五颜六色的粉末，接着把粉末洒向镜头前，镜头随之穿过粉末"
}
```

### 4.3 成功响应示例

```json
{
  "code": 10000,
  "data": {
    "task_id": "12345678"
  },
  "message": "Success",
  "request_id": "20240720103939AF0029465CF6A74E51EC",
  "status": 10000,
  "time_elapsed": "104.852309ms"
}
```

## 5. 查询任务接口

### 5.1 功能
根据任务ID查询视频生成结果

### 5.2 示例请求体

```json
{
  "req_key": "jimeng_vgfm_t2v_l20",
  "task_id": "7491596536074305586"
}
```

### 5.2 成功响应示例

```json
{
  "code": 10000,
  "data": {
    "video_url": "https://xxx.mp4"
  },
  "message": "Success",
  "request_id": "20250411115207A6A6DFCBB50D4C811F98",
  "status": 10000,
  "time_elapsed": "84.460172ms"
}
```

## 6. 错误码说明

### 6.1 通用错误码

| HTTP Code | 错误码 | 描述 | 建议处理方式 |
|--------|--------|------|------------|
| 200 | 10000 | ECSuccess | 请求成功 |
| 400 | 50200 | ECReqInvalidArgs | 参数错误 |
| 400 | 50201 | ECReqMissingArgs | 缺少参数 |
| 400 | 50204 | ECParseArgs | 参数类型错误/参数缺失 |
| 400 | 50213 | ECReqBodySizeLimited | 请求Body过大 |
| 400 | 50412 | Text Risk Not Pass | 输入文本审核未通过 |
| 400 | 50413 | Post Text Risk Not Pass | 输入文本NER、IP、Blocklist等拦截 |
| 401 | 50400 | ECAuth | 权限校验失败 |
| 404 | 50402 | ECReqMethod | 访问的接口不存在 |
| 404 | 50429 | ECReqLimit | 超过调用QPS限制 |
| 500 | 50500 | ECInternal | 服务器内部错误 |
| 500 | 50501 | ECRPCInternal | 服务器内部RPC错误 |

## 7. Prompt建议

### 7.1 明确运镜方式
运镜决定观众视觉焦点和故事情感节奏，明确、精炼且有序的镜头指导能让模型构建出想要的画面，增强视频视觉效果。
**示例**：想呈现一个海底美人鱼在游动，不能仅仅只描写平面上的“游”，而是要把镜头的动态描述清楚：“镜头围绕着女孩360旋转……”

### 7.2 明确行动逻辑
一个好故事需清晰的起承转合，描述连续动作时要清晰连贯，用顺序词指明角色行动及顺序，确保动作顺畅衔接，创造真实引人的动态效果
**示例**：蓝色毛绒玩具在超市里拖地，结果拖把洒出好多五颜六色的粉末，接着把粉末洒向镜头前，镜头随之穿过粉末

### 7.3 匹配多镜头组合
当视频由多个镜头组成时，易出现内容不匹配错位，可给每个镜头编号并匹配描述，在镜头不错位前提下，把运动和细节描述清楚以获得更符合预期的效果
**示例**：
- 第一个镜头-全景：身穿宇航服的狗狗左右环顾
- 第二个镜头-近景：宇航员狗狗向操作台走去
- 第三个镜头-特写：宇航员狗狗伸手去按操作界面

### 7.4 文字描述精准
模型虽有文字理解能力，但需精准描述传达真实想法，避免含糊不清和过度堆砌关键词，可简化描述调整语言，还可大胆想象，运用特定动词塑造生动视频效果
**示例**：衣服爆发出一团白色泡沫状的物体，仿佛瞬间膨胀或炸裂开来；衣服被气球完全包裹，气球的颜色以橙色、白色和银色为主，层层叠叠地围绕身体。越来越多不断生长；衣服逐渐化作一团不断扩展的巨大银色丝球，闪烁着光泽，呈现出无尽生长的动态；衣服像气球般迅速膨胀，逐渐充满周围空间，随后开始缓缓泄气；衣服变成很多个银色气球，飞起来，然后散落在地面上

## 8. 安全建议

1. 将AccessKey保存在安全环境变量中，不要硬编码在代码里
2. 对敏感操作建议增加IP白名单配置
3. 使用VPC网络增强安全性

## 9. 最佳实践

1. 提示词应该清晰描述所需视频内容
2. 根据设备类型选择合适的宽高比（如竖屏9:16，横屏16:9）
3. 建议设置重试机制（推荐3次指数退避重试）
4. 视频URL的有效期为1小时，请及时下载